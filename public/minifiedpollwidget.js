const pollWidgetNamespace=function(e){function t(e,t,n,l){e.innerHTML=`<div class="pw_poll-container"><h3>${t}</h3><div class="pw_bars"></div><div class="pw_track-container"><div class="pw_track"><div class="pw_circle"></div></div><div style="width:100%;font-size:15px;display:flex;justify-content:space-around;align-items:center;">${n.map(e=>`<span class="pw_option">${e}</span>`).join("")}</div></div></div>`,i(e,l)}function i(e,t){let i=e.querySelector(".pw_bars");i.innerHTML="";let n=Math.max(...t);for(let l=0;l<t.length;l++){let r=document.createElement("div");r.className="pw_bar";let o=t[l]/n*100;r.style.height=o+"%",i.appendChild(r)}}function n(e){let t=localStorage.getItem(e);if(t)return JSON.parse(t);{let i=Array.from({length:15},()=>Math.floor(20*Math.random())+4);return l(e,i),i}}function l(e,t){localStorage.setItem(e,JSON.stringify(t))}function r(){!function e(){let t=document.createElement("style");t.textContent=".pw_poll-container{width:100%;height:100%;padding:1em;border:1px solid #000;border-radius:20px;margin:50px auto;text-align:center;display:flex;flex-direction:column;justify-content:center}.pw_option{width:100px}.pw_track-container{position:relative;padding:0 10px}.pw_track{width:85%;height:10px;background-color:#d3d3d3;position:relative;margin:20px auto;border-radius:10px}.pw_circle{width:30px;height:30px;background-color:#1e90ff;border-radius:50%;position:absolute;bottom:-9px;left:-5px;cursor:pointer}.pw_bars{width:80%;height:100px;margin:0 auto;display:flex;justify-content:space-between;align-items:baseline}.pw_bar{width:20px;height:100%;background-color:#90ee90;bottom:0}",document.head.appendChild(t)}();let e={},r=document.querySelectorAll(".poll-widget");r.forEach(r=>{let o=r.getAttribute("data-id");if(Object.keys(e).includes(o))return;e[o]={};let a=r.getAttribute("data-dim"),d=r.getAttribute("data-question"),s=JSON.parse(r.getAttribute("data-options"));r.currentIndex=null,r.style.width=a.split("x")[1]+"px",r.style.height=a.split("x")[0]+"px";let c=n(d);0===c.length&&l(d,c=Array(15).fill(0));let p=n(d);t(r,d,s,p);let u=r.querySelector(".pw_track"),$=r.querySelector(".pw_circle"),f=!1;$.addEventListener("mousedown",function(e){f=!0,u.classList.add("active")}),document.addEventListener("mousemove",function(e){if(f){let t=u.getBoundingClientRect(),i=e.clientX-t.left-$.offsetWidth/2;i=Math.max(0,Math.min(i,u.offsetWidth-$.offsetWidth)),$.style.left=i+"px",u.offsetWidth}}),document.addEventListener("mouseup",function(){if(f){f=!1,u.classList.remove("active");let e=$.style.left,t=parseInt(e.substr(0,e.length-2))/u.offsetWidth*100,o=n(d);null!=r.currentIndex?(o[r.currentIndex]-=1,r.currentIndex=Math.floor(t/(100/15)),o[r.currentIndex]+=1):(r.currentIndex=Math.floor(t/(100/15)),o[r.currentIndex]+=1),l(d,o),i(r,o)}})})}return e.renderPoll=t,e.updateBars=i,e.getVotes=n,e.saveVotes=l,e.initPollWidgets=r,document.addEventListener("DOMContentLoaded",r),e}(window.pollWidgetNamespace||{});window.pollWidgetNamespace=pollWidgetNamespace;